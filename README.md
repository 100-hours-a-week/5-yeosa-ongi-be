# ğŸ§¡ ì˜¨ê¸° (ONGI) - Backend

> **AI ê¸°ë°˜ ì‚¬ì§„ ì •ë¦¬ ë° ì»¤ë®¤ë‹ˆí‹° ì„œë¹„ìŠ¤**  
> ì‚¬ì§„ ì† ê¸°ì–µì„ ì •ë¦¬í•˜ê³ , ê³µìœ í•˜ë©°, ì¶”ì–µì„ ë‹¤ì‹œ êº¼ë‚´ë³´ëŠ” ê³µê°„
![7](https://github.com/user-attachments/assets/7095b925-50e7-445d-864a-53b289a5880b)
![8](https://github.com/user-attachments/assets/d0f4cc59-e295-45cd-913d-18f7f7da021b)
![9](https://github.com/user-attachments/assets/2bc8f4a6-19d9-4640-bf1a-cded70b42793)
![10](https://github.com/user-attachments/assets/905acf4e-31a9-41ec-be7d-e6d19762b1b0)

---
## ì¹´ì¹´ì˜¤í…Œí¬ ë¶€íŠ¸ìº í”„ íŒŒì´ë„í”„ë¡œì íŠ¸ ìµœìš°ìˆ˜ìƒ(1ë“±) ìˆ˜ìƒ
![20250801_174448](https://github.com/user-attachments/assets/4ac0ba86-d8db-4cc7-adf2-884048b20f7d)

---

## ğŸ›  Tech Stack

| Category     | Stack                                                              |
|--------------|--------------------------------------------------------------------|
| Language     | Java                                                            |
| Framework    | Spring Boot, Spring Data JPA,                  |
| DB & Cache   | MySQL, Redis                                      |
| Message Queue| Apache Kafka                                       |
| Build Tool   | Gradle                                                             |
| Others       | Flyway       |

---

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡°
```
main
â”œâ”€â”€ java/ongi/ongibe
â”‚   â”œâ”€â”€ domain                # ì£¼ìš” ë„ë©”ì¸ë³„ íŒ¨í‚¤ì§€ (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì¤‘ì‹¬)
â”‚   â”‚   â”œâ”€â”€ ai                # AI ë¶„ì„ ë‹¨ê³„ë³„ Kafka Producer, Consumer ë° API ê¸°ë°˜ í†µì‹  ëª¨ë“ˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ aiInterface   # AI ì—°ë™ì„ ìœ„í•œ ì„œë¹„ìŠ¤ ì¸í„°í˜ì´ìŠ¤ ëª¨ìŒ
â”‚   â”‚   â”‚   â”œâ”€â”€ consumer      # Kafka Consumer (ê° AI ë¶„ì„ ë‹¨ê³„ë³„ ë©”ì‹œì§€ ì²˜ë¦¬)
â”‚   â”‚   â”‚   â”œâ”€â”€ controller    # AI í—¬ìŠ¤ì²´í¬ìš© ì»¨íŠ¸ë¡¤ëŸ¬
â”‚   â”‚   â”‚   â”œâ”€â”€ dto           # AI ìš”ì²­/ì‘ë‹µ DTO
â”‚   â”‚   â”‚   â”œâ”€â”€ entity        # AI ë¶„ì„ ìƒíƒœ ì €ì¥ ì—”í‹°í‹°
â”‚   â”‚   â”‚   â”œâ”€â”€ event         # AI ë¶„ì„ ì™„ë£Œ ì‹œ ë°œí–‰ë˜ëŠ” ì´ë²¤íŠ¸ ê°ì²´
â”‚   â”‚   â”‚   â”œâ”€â”€ exception     # Kafka ì¬ì‹œë„ ë“± ì»¤ìŠ¤í…€ ì˜ˆì™¸ ì •ì˜
â”‚   â”‚   â”‚   â”œâ”€â”€ kafka         # Kafka ê´€ë ¨ ìœ í‹¸ ì„œë¹„ìŠ¤
â”‚   â”‚   â”‚   â”œâ”€â”€ producer      # Kafka Producer
â”‚   â”‚   â”‚   â”œâ”€â”€ repository    # AI ìƒíƒœ ì €ì¥ìš© Repository
â”‚   â”‚   â”‚   â””â”€â”€ service       # AI HTTP ìš”ì²­ ë¡œì§ êµ¬í˜„ì²´
â”‚   â”‚   â”œâ”€â”€ album             # ì•¨ë²” ë„ë©”ì¸
â”‚   â”‚   â”‚   â”œâ”€â”€ controller    # ì•¨ë²”, ëŒ“ê¸€, ì¢‹ì•„ìš” API ì—”ë“œí¬ì¸íŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ dto           # ì•¨ë²” ê´€ë ¨ ìš”ì²­/ì‘ë‹µ DTO
â”‚   â”‚   â”‚   â”œâ”€â”€ entity        # ì•¨ë²”, ì‚¬ì§„, í´ëŸ¬ìŠ¤í„° ë“± ë„ë©”ì¸ ì—”í‹°í‹°
â”‚   â”‚   â”‚   â”œâ”€â”€ event         # ì•¨ë²” ê´€ë ¨ ì´ë²¤íŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ exception     # ì•¨ë²” ë„ë©”ì¸ ì˜ˆì™¸ ì²˜ë¦¬
â”‚   â”‚   â”‚   â”œâ”€â”€ repository    # ì•¨ë²” ê´€ë ¨ ë°ì´í„° ì ‘ê·¼ ë ˆì´ì–´
â”‚   â”‚   â”‚   â”œâ”€â”€ schedule      # ì¢‹ì•„ìš” ë™ê¸°í™” ë“± ì •ê¸° ì‘ì—… Scheduler
â”‚   â”‚   â”‚   â””â”€â”€ service       # ì•¨ë²” ë„ë©”ì¸ ì„œë¹„ìŠ¤ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ auth              # ì¸ì¦/ì¸ê°€ ëª¨ë“ˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ config        # Kakao API ì„¤ì • í´ë˜ìŠ¤
â”‚   â”‚   â”‚   â”œâ”€â”€ controller    # ë¡œê·¸ì¸, í† í° ì¬ë°œê¸‰ API
â”‚   â”‚   â”‚   â”œâ”€â”€ dto           # ë¡œê·¸ì¸ ê´€ë ¨ ìš”ì²­/ì‘ë‹µ DTO
â”‚   â”‚   â”‚   â”œâ”€â”€ entity        # OAuthToken ë“± ì—”í‹°í‹°
â”‚   â”‚   â”‚   â”œâ”€â”€ repository    # OAuthToken ì €ì¥ì†Œ
â”‚   â”‚   â”‚   â””â”€â”€ service       # ì¸ì¦ ë¡œì§ ì²˜ë¦¬
â”‚   â”‚   â”œâ”€â”€ notification      # ì•Œë¦¼ ë„ë©”ì¸
â”‚   â”‚   â”‚   â”œâ”€â”€ controller    # ì•Œë¦¼ ì¡°íšŒ API
â”‚   â”‚   â”‚   â”œâ”€â”€ dto           # ì•Œë¦¼ ì‘ë‹µ DTO
â”‚   â”‚   â”‚   â”œâ”€â”€ entity        # ì•Œë¦¼ í…Œì´ë¸”
â”‚   â”‚   â”‚   â”œâ”€â”€ event         # ì•¨ë²” ì´ˆëŒ€/ìƒì„± ì´ë²¤íŠ¸ë¡œë¶€í„° ì•Œë¦¼ ìƒì„±
â”‚   â”‚   â”‚   â”œâ”€â”€ repository    # ì•Œë¦¼ ì €ì¥ì†Œ
â”‚   â”‚   â”‚   â””â”€â”€ service       # ì•Œë¦¼ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ place             # ì¥ì†Œ ë„ë©”ì¸
â”‚   â”‚   â”‚   â”œâ”€â”€ entity        # ì¥ì†Œ ì—”í‹°í‹°
â”‚   â”‚   â”‚   â””â”€â”€ service       # ì¥ì†Œ ë§¤í•‘ ì„œë¹„ìŠ¤
â”‚   â”‚   â””â”€â”€ user              # ì‚¬ìš©ì ë„ë©”ì¸
â”‚   â”‚       â”œâ”€â”€ controller    # ì‚¬ìš©ì ì •ë³´, í†µê³„ API
â”‚   â”‚       â”œâ”€â”€ dto           # ì‚¬ìš©ì ê´€ë ¨ DTO
â”‚   â”‚       â”œâ”€â”€ entity        # User ì—”í‹°í‹°
â”‚   â”‚       â”œâ”€â”€ exception     # ì‚¬ìš©ì ì˜ˆì™¸
â”‚   â”‚       â”œâ”€â”€ repository    # ì‚¬ìš©ì ì €ì¥ì†Œ
â”‚   â”‚       â””â”€â”€ service       # ì‚¬ìš©ì ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ cache                 # ìºì‹œ ê´€ë ¨ ëª¨ë“ˆ
â”‚   â”‚   â”œâ”€â”€ album             # ì•¨ë²” ìºì‹± ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ event             # ìºì‹œ ê´€ë ¨ ë„ë©”ì¸ ì´ë²¤íŠ¸
â”‚   â”‚   â””â”€â”€ user              # ì‚¬ìš©ì ìºì‹± ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ global                # ê³µí†µ ìœ í‹¸ ë° ì„¤ì • ëª¨ë“ˆ
â”‚   â”‚   â”œâ”€â”€ cache             # ê³µí†µ Redis ìœ í‹¸
â”‚   â”‚   â”œâ”€â”€ config            # ê³µí†µ Config í´ë˜ìŠ¤ë“¤
â”‚   â”‚   â”œâ”€â”€ eventlistener     # ì „ì—­ ë„ë©”ì¸ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
â”‚   â”‚   â”œâ”€â”€ exception         # ì¸ì¦/ë³´ì•ˆ ë“± ì „ì—­ ì˜ˆì™¸
â”‚   â”‚   â”‚   â””â”€â”€ handler       # ì˜ˆì™¸ í•¸ë“¤ëŸ¬
â”‚   â”‚   â”œâ”€â”€ kafka             # Kafka ë¦¬ìŠ¤ë„ˆ ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ s3                # S3 Presigned URL ë°œê¸‰ ê¸°ëŠ¥
â”‚   â”‚   â”‚   â””â”€â”€ dto           # Presigned URL ìš”ì²­/ì‘ë‹µ DTO
â”‚   â”‚   â”œâ”€â”€ security          # Spring Security ì„¤ì • ë° í•„í„°
â”‚   â”‚   â”‚   â”œâ”€â”€ config
â”‚   â”‚   â”‚   â”œâ”€â”€ filter
â”‚   â”‚   â”‚   â””â”€â”€ util
â”‚   â”‚   â””â”€â”€ util              # ê³µí†µ ìœ í‹¸ í´ë˜ìŠ¤ (DateUtil, JsonUtil ë“±)
â”‚   â”œâ”€â”€ loadtest              # ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ìš© ì„ì‹œ API
â”‚   â””â”€â”€ swagger               # Swaggerìš© ì‘ë‹µ ê°ì²´ ì •ë¦¬
â”‚       â”œâ”€â”€ album
â”‚       â”œâ”€â”€ s3
â”‚       â””â”€â”€ user
â””â”€â”€ resources
    â”œâ”€â”€ application-{dev,prod,test,local}.yml  # í™˜ê²½ë³„ ì„¤ì • íŒŒì¼
    â”œâ”€â”€ db/migration                           # Flyway ê¸°ë°˜ SQL ë§ˆì´ê·¸ë ˆì´ì…˜
    â””â”€â”€ lua                                    # Redis Lua ìŠ¤í¬ë¦½íŠ¸ (ì¢‹ì•„ìš”/ì‹«ì–´ìš” ì²˜ë¦¬)
```

---

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### ğŸ“· ì‚¬ì§„ ì—…ë¡œë“œ & AI ë¶„ì„
- S3 Presigned URLì„ í†µí•´ ì´ë¯¸ì§€ ì—…ë¡œë“œ
- ì—…ë¡œë“œëœ ì‚¬ì§„ì€ AI ì„œë²„ì™€ ì—°ë™í•˜ì—¬ ë‹¤ìŒ ì •ë³´ ë¶„ì„:
  - ì¤‘ë³µ ì—¬ë¶€
  - í”ë“¤ë¦¼ ì—¬ë¶€
  - ë¯¸ì  ì ìˆ˜
  - ìœ„ì¹˜ ë©”íƒ€ë°ì´í„° â†’ í–‰ì •êµ¬ì—­ ë³€í™˜ (Kakao API)
  - íƒœê·¸ ì¶”ì¶œ (ì¹´í…Œê³ ë¦¬ ê¸°ë°˜)

### ğŸ ì•¨ë²”
- AI ê²°ê³¼ ê¸°ë°˜ ëŒ€í‘œ ì‚¬ì§„ ìë™ ì„ ì •
- ì•¨ë²” ìƒì„± ì‹œ ì¥ì†Œë³„ ì‚¬ì§„ ì •ë¦¬ ë° í†µê³„ ì œê³µ
- ë¬´í•œìŠ¤í¬ë¡¤ ê¸°ë°˜ ì•¨ë²” ì¡°íšŒ (ì¸ë„¤ì¼, ê° ì•¨ë²”ë³„ ë©¤ë²„ í¬í•¨)

### ğŸ¤ ì»¤ë®¤ë‹ˆí‹° & ì´ˆëŒ€
- ì•¨ë²” ë©¤ë²„ ì´ˆëŒ€/íƒˆí‡´
- ëŒ“ê¸€, ì¢‹ì•„ìš” ê¸°ëŠ¥
- ëŒ€í‘œì‚¬ì§„ ê¸°ë°˜ ì¸ë„¤ì¼ ì œê³µ

### ğŸš€ ì„±ëŠ¥ ìµœì í™”
- **Redis ìºì‹œ ì ìš©** (Look-aside + Write-through ì „ëµ)
  - ë©”ì¸í˜ì´ì§€, í”¼ë“œ, í†µê³„ ìºì‹±
- **Kafka ë¹„ë™ê¸° ì²˜ë¦¬**
  - AI ì„œë²„ì™€ì˜ í†µì‹ ì„ Kafka ê¸°ë°˜ìœ¼ë¡œ ë¹„ë™ê¸° ì²˜ë¦¬í•˜ì—¬ ì„œë²„ ë¶€í•˜ ê°ì†Œ
- **DB ìµœì í™”**
  - ì¡°íšŒ/í†µê³„ìš© ì¿¼ë¦¬ ìµœì í™” ëª©ì  ì¸ë±ìŠ¤ ì„¤ì •

---


## ğŸ§¾ ERD ìš”ì•½

> ì£¼ìš” í…Œì´ë¸”: `User`, `Album`, `Picture`, `Place`, `Feed`, `Comment`, `Like`, `FaceCluster` ë“±

(ERD ë‹¤ì´ì–´ê·¸ë¨ ì²¨ë¶€ ë§í¬ ë˜ëŠ” ì´ë¯¸ì§€)

---

## ğŸ“Œ ê¸°íƒ€

- AI ì„œë²„ ì—°ë™ ë¬¸ì„œ: [`/docs/ai-api-spec.md`](./docs/ai-api-spec.md)
- API ëª…ì„¸ì„œ: [Swagger ë§í¬ ë˜ëŠ” Postman Collection]
- íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ëª¨ìŒ: [`/docs/troubleshooting.md`](./docs/troubleshooting.md)

